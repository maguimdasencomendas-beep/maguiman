function roundcube_browser(){var e=navigator;this.agent=e.userAgent,this.agent_lc=e.userAgent.toLowerCase(),this.name=e.appName,this.vendor=e.vendor?e.vendor:"",this.vendver=e.vendorSub?parseFloat(e.vendorSub):0,this.product=e.product?e.product:"",this.platform=String(e.platform).toLowerCase(),this.lang=e.language?e.language.substring(0,2):e.browserLanguage?e.browserLanguage.substring(0,2):e.systemLanguage?e.systemLanguage.substring(0,2):"en",this.win=this.platform.indexOf("win")>=0,this.mac=this.platform.indexOf("mac")>=0,this.linux=this.platform.indexOf("linux")>=0,this.unix=this.platform.indexOf("unix")>=0,this.dom=!!document.getElementById,this.dom2=document.addEventListener&&document.removeEventListener,this.edge=this.agent_lc.indexOf(" edge/")>0,this.webkit=!this.edge&&this.agent_lc.indexOf("applewebkit")>0,this.ie=document.all&&!window.opera||this.win&&this.agent_lc.indexOf("trident/")>0,window.opera?(this.opera=!0,this.vendver=opera.version()):this.ie||this.edge||(this.chrome=this.agent_lc.indexOf("chrome")>0,this.opera=this.webkit&&this.agent.indexOf(" OPR/")>0,this.safari=!this.chrome&&!this.opera&&(this.webkit||this.agent_lc.indexOf("safari")>0),this.konq=this.agent_lc.indexOf("konqueror")>0,this.mz=this.dom&&!this.chrome&&!this.safari&&!this.konq&&!this.opera&&this.agent.indexOf("Mozilla")>=0,this.iphone=this.safari&&(this.agent_lc.indexOf("iphone")>0||this.agent_lc.indexOf("ipod")>0),this.ipad=this.safari&&this.agent_lc.indexOf("ipad")>0),this.vendver||(this.vendver=/(opera|opr|khtml|chrome|safari|applewebkit|msie)(\s|\/)([0-9\.]+)/.test(this.agent_lc)?parseFloat(RegExp.$3):0,this.vendver||(this.vendver=/rv:([0-9\.]+)/.test(this.agent)?parseFloat(RegExp.$1):0)),this.safari&&/;\s+([a-z]{2})-[a-z]{2}\)/.test(this.agent_lc)&&(this.lang=RegExp.$1),this.tablet=/ipad|android|xoom|sch-i800|playbook|tablet|kindle/i.test(this.agent_lc),this.mobile=/iphone|ipod|blackberry|iemobile|opera mini|opera mobi|mobile/i.test(this.agent_lc),this.touch=this.mobile||this.tablet,this.pointer="function"==typeof window.PointerEvent,this.cookies=e.cookieEnabled,this.xmlhttp_test=function(){var e=new Function("try{var o=new ActiveXObject('Microsoft.XMLHTTP');return true;}catch(err){return false;}");return this.xmlhttp=window.XMLHttpRequest||"ActiveXObject"in window&&e(),this.xmlhttp},this.set_html_class=function(){var e=" js";this.ie?e+=" ie ie"+parseInt(this.vendver):this.opera?e+=" opera":this.konq?e+=" konqueror":this.safari?e+=" chrome":this.chrome?e+=" chrome":this.mz&&(e+=" mozilla"),this.iphone?e+=" iphone":this.ipad?e+=" ipad":this.webkit&&(e+=" webkit"),this.mobile&&(e+=" mobile"),this.tablet&&(e+=" tablet"),document.documentElement&&(document.documentElement.className+=e)}}function rcube_event_engine(){this._events={}}function rcube_check_email(e,t,n){if(!e)return!!n&&0;n&&(t=!0);var r="[^\\x0d\\x22\\x5c\\x80-\\xff]",o="[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+",i="\\x5c[\\x00-\\x7f]",u="\\x22("+r+"|"+i+")*\\x22",a="\\[(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])(.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])){3}\\]",s="\\[IPv6:[0-9a-f:.]+\\]",c="("+a+")|("+s+")",h="(("+c+")|(([^@\\x2e]+\\x2e)+([^\\x00-\\x40\\x5b-\\x60\\x7b-\\x7f]{2,}|xn--[a-z0-9]{2,})))",f=["\\u0645\\u062b\\u0627\\u0644\\x2e\\u0625\\u062e\\u062a\\u0628\\u0627\\u0631","\\u4f8b\\u5b50\\x2e\\u6d4b\\u8bd5","\\u4f8b\\u5b50\\x2e\\u6e2c\\u8a66","\\u03c0\\u03b1\\u03c1\\u03ac\\u03b4\\u03b5\\u03b9\\u03b3\\u03bc\\u03b1\\x2e\\u03b4\\u03bf\\u03ba\\u03b9\\u03bc\\u03ae","\\u0909\\u0926\\u093e\\u0939\\u0930\\u0923\\x2e\\u092a\\u0930\\u0940\\u0915\\u094d\\u0937\\u093e","\\u4f8b\\u3048\\x2e\\u30c6\\u30b9\\u30c8","\\uc2e4\\ub840\\x2e\\ud14c\\uc2a4\\ud2b8","\\u0645\\u062b\\u0627\\u0644\\x2e\\u0622\\u0632\\u0645\\u0627\\u06cc\\u0634ÛŒ","\\u043f\\u0440\\u0438\\u043c\\u0435\\u0440\\x2e\\u0438\\u0441\\u043f\\u044b\\u0442\\u0430\\u043d\\u0438\\u0435","\\u0b89\\u0ba4\\u0bbe\\u0bb0\\u0ba3\\u0bae\\u0bcd\\x2e\\u0baa\\u0bb0\\u0bbf\\u0b9f\\u0bcd\\u0b9a\\u0bc8","\\u05d1\\u05f2\\u05b7\\u05e9\\u05e4\\u05bc\\u05d9\\u05dc\\x2e\\u05d8\\u05e2\\u05e1\\u05d8"],d="mailtest\\x40("+f.join("|")+")",l="("+o+"|"+u+")",b="[,;\\s\\n]",v=l+"(\\x2e"+l+")*",g="(("+v+"\\x40"+h+")|("+d+"))",m=n?"ig":"i",p=t?new RegExp("(^|<|"+b+")"+g+"($|>|"+b+")",m):new RegExp("^"+g+"$","i");return n?e.match(p).length:p.test(e)}function rcube_clone_object(e){var t={};for(var n in e)e[n]&&"object"==typeof e[n]?t[n]=rcube_clone_object(e[n]):t[n]=e[n];return t}function urlencode(e){return window.encodeURIComponent?encodeURIComponent(e).replace("*","%2A"):escape(e).replace("+","%2B").replace("*","%2A").replace("/","%2F").replace("@","%40")}function rcube_find_object(e,t){var n,r,o,i;if(t||(t=document),t.getElementById&&(o=t.getElementById(e)))return o;if(!o&&t.getElementsByName&&(i=t.getElementsByName(e))&&(o=i[0]),!o&&t.all&&(o=t.all[e]),!o&&t.images.length&&(o=t.images[e]),!o&&t.forms.length)for(r=0;r<t.forms.length;r++)t.forms[r].name==e?o=t.forms[r]:t.forms[r].elements[e]&&(o=t.forms[r].elements[e]);if(!o&&t.layers)for(t.layers[e]&&(o=t.layers[e]),n=0;!o&&n<t.layers.length;n++)o=rcube_find_object(e,t.layers[n].document);return o}function rcube_mouse_is_over(e,t){var n=rcube_event.get_mouse_pos(e),r=$(t).offset();return n.x>=r.left&&n.x<r.left+t.offsetWidth&&n.y>=r.top&&n.y<r.top+t.offsetHeight}function setCookie(e,t,n,r,o,i){var u=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(r?"; path="+r:"")+(o?"; domain="+o:"")+(i?"; secure":"");document.cookie=u}function getCookie(e){var t=document.cookie,n=e+"=",r=t.indexOf("; "+n);if(r==-1){if(r=t.indexOf(n),0!=r)return null}else r+=2;var o=t.indexOf(";",r);return o==-1&&(o=t.length),unescape(t.substring(r+n.length,o))}var CONTROL_KEY=1,SHIFT_KEY=2,CONTROL_SHIFT_KEY=3,rcube_event={get_target:function(e){return e=e||window.event,e&&e.target?e.target:e.srcElement},get_keycode:function(e){return e=e||window.event,e&&e.keyCode?e.keyCode:e&&e.which?e.which:0},get_button:function(e){return e=e||window.event,e&&void 0!==e.button?e.button:e&&e.which?e.which:0},get_modifier:function(e){var t=0;return e=e||window.event,bw.mac&&e?t+=(e.metaKey&&CONTROL_KEY)+(e.shiftKey&&SHIFT_KEY):e&&(t+=(e.ctrlKey&&CONTROL_KEY)+(e.shiftKey&&SHIFT_KEY)),t},get_mouse_pos:function(e){e||(e=window.event);var t=e.pageX?e.pageX:e.clientX,n=e.pageY?e.pageY:e.clientY;return document.body&&document.all&&(t+=document.body.scrollLeft,n+=document.body.scrollTop),e._offset&&(t+=e._offset.left,n+=e._offset.top),{x:t,y:n}},add_listener:function(e){if(e.object&&e.method){e.element||(e.element=document),e.object._rc_events||(e.object._rc_events={});var t=e.event+"*"+e.method;e.object._rc_events[t]||(e.object._rc_events[t]=function(t){return e.object[e.method](t)}),e.element.addEventListener?e.element.addEventListener(e.event,e.object._rc_events[t],!1):e.element.attachEvent?(e.element.detachEvent("on"+e.event,e.object._rc_events[t]),e.element.attachEvent("on"+e.event,e.object._rc_events[t])):e.element["on"+e.event]=e.object._rc_events[t]}},remove_listener:function(e){e.element||(e.element=document);var t=e.event+"*"+e.method;e.object&&e.object._rc_events&&e.object._rc_events[t]&&(e.element.removeEventListener?e.element.removeEventListener(e.event,e.object._rc_events[t],!1):e.element.detachEvent?e.element.detachEvent("on"+e.event,e.object._rc_events[t]):e.element["on"+e.event]=null)},cancel:function(e){var t=e?e:window.event;return t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,!1},is_keyboard:function(e){return e&&(e.type&&String(e.type).match(/^key/)||!e.pageX&&(e.pageY||0)<=0&&!e.clientX&&(e.clientY||0)<=0)},keyboard_only:function(e){return!!rcube_event.is_keyboard(e)||rcube_event.cancel(e)},touchevent:function(e){return{pageX:e.pageX,pageY:e.pageY,offsetX:e.pageX-e.target.offsetLeft,offsetY:e.pageY-e.target.offsetTop,target:e.target,istouch:!0}}};rcube_event_engine.prototype={addEventListener:function(e,t,n){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push({func:t,obj:n?n:window}),this},removeEventListener:function(e,t,n){void 0===n&&(n=window);for(var r,o=0;this._events&&this._events[e]&&o<this._events[e].length;o++)(r=this._events[e][o])&&r.func==t&&r.obj==n&&(this._events[e][o]=null)},triggerEvent:function(e,t){var n,r;if(void 0===t?t=this:"object"==typeof t&&(t.event=e),this._event_exec||(this._event_exec={}),this._events&&this._events[e]&&!this._event_exec[e]){this._event_exec[e]=!0;for(var o=0;o<this._events[e].length&&(!(r=this._events[e][o])||("function"==typeof r.func?n=r.func.call?r.func.call(r.obj,t):r.func(t):"function"==typeof r.obj[r.func]&&(n=r.obj[r.func](t)),void 0===n||n));o++);if(n&&n.event)try{delete n.event}catch(i){$(n).removeAttr("event")}}if(delete this._event_exec[e],t.event)try{delete t.event}catch(i){$(t).removeAttr("event")}return n}},roundcube_browser.prototype.set_cookie=setCookie,roundcube_browser.prototype.get_cookie=getCookie;var bw=new roundcube_browser;bw.set_html_class(),RegExp.escape=function(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},Date.prototype.getStdTimezoneOffset=function(){for(var e=12,t=new Date(null,e,1),n=t.getTimezoneOffset();--e;)if(t.setUTCMonth(e),n!=t.getTimezoneOffset())return Math.max(n,t.getTimezoneOffset());return n},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.slice(t,e.length)===e}),jQuery.last=function(e){return e&&e.length?e[e.length-1]:void 0},jQuery.fn.placeholder=function(e){return this.each(function(){$(this).prop({title:e,placeholder:e})})};var rcube_parse_query=function(e){if(!e)return{};var t,n,r,o={},i=/([^&=]+)=?([^&]*)/g,u=/\+/g,a=function(e){return decodeURIComponent(e.replace(u," "))};for(e=e.replace(/\?/,"");t=i.exec(e);)n=a(t[1]),r=a(t[2]),"[]"===n.substring(n.length-2)?(n=n.substring(0,n.length-2),(o[n]||(o[n]=[])).push(r)):o[n]=r;return o},Base64=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},n=function(e){for(var t=0,n="",r=0,o=0,i=0;t<e.length;)r=e.charCodeAt(t),r<128?(n+=String.fromCharCode(r),t++):r>191&&r<224?(o=e.charCodeAt(t+1),n+=String.fromCharCode((31&r)<<6|63&o),t+=2):(o=e.charCodeAt(t+1),i=e.charCodeAt(t+2),n+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),t+=3);return n},r={encode:function(n){if(n=t(n),"function"==typeof window.btoa)try{return btoa(n)}catch(r){}for(var o,i,u,a,s,c,h,f=0,d="",l=n.length;f<l;)o=n.charCodeAt(f++),i=n.charCodeAt(f++),u=n.charCodeAt(f++),a=o>>2,s=(3&o)<<4|i>>4,c=(15&i)<<2|u>>6,h=63&u,isNaN(i)?c=h=64:isNaN(u)&&(h=64),d=d+e.charAt(a)+e.charAt(s)+e.charAt(c)+e.charAt(h);return d},decode:function(t){if("function"==typeof window.atob)try{return n(atob(t))}catch(r){}var o,i,u,a,s,c,h,f,d=0,l="";for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),f=t.length;d<f;)a=e.indexOf(t.charAt(d++)),s=e.indexOf(t.charAt(d++)),c=e.indexOf(t.charAt(d++)),h=e.indexOf(t.charAt(d++)),o=a<<2|s>>4,i=(15&s)<<4|c>>2,u=(3&c)<<6|h,l+=String.fromCharCode(o),64!=c&&(l+=String.fromCharCode(i)),64!=h&&(l+=String.fromCharCode(u));return n(l)}};return r}();
var locamail=locamail||{};locamail.utils=function(){"use strict";function t(){var t=window.navigator.userAgent,n=t.indexOf("MSIE ");if(n>0)return parseInt(t.substring(n+5,t.indexOf(".",n)),10);var e=t.indexOf("Trident/");if(e>0){var a=t.indexOf("rv:");return parseInt(t.substring(a+3,t.indexOf(".",a)),10)}var r=t.indexOf("Edge/");return r>0&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}function n(t){var n=$.trim($(t).text()).toLocaleUpperCase().charAt(0);$(t).html(n)}function e(t,n,e){0!==t.length&&$(t).each(function(t,a){a.on(n?n:"mousedown",e?e:"",function(){$(".lm-dropdown-user").removeClass("open")})})}function a(){r()}function r(){$.validator.addMethod("dateGreaterThan",function(t,n,e){var a,r;return""===$(e[0]).val()||(r=moment(t,"DD/MM/YYYY").tz(moment.tz.guess()),a=moment($(e[0]).val(),"DD/MM/YYYY").tz(moment.tz.guess()),a.diff(r)<0)},rcmail.gettext("form_validate_greater_than","locamail_translate"))}function i(t){return t/1024/1024}function o(t,n){return t.toFixed(n)/1}function c(){var t=["#75ca17","#3080c7","#429c42","#eb9c35","#31b5db","#9757ad","#1ccbce","#e96827","#3a55a4","#ddb808","#e971cb"];return t[Math.floor(Math.random()*t.length)]}function s(t){var n,e="string"==typeof t&&t.length?t.split(" "):"*",a=e[0].substring(0,1);return e.length>1?(n=e[e.length-1].substring(0,1),a+n):a}function u(t){return t&&t.replace(/\\/g,"\\\\")}function g(t){return t&&t.replace(/"/g,"&quot;")}function l(t){var n=["image/png","image/svg+xml","image/jpeg","image/gif"],e=rcmail.env.attachments[t],a="application/octet-stream"===e;return!(!a||!locamail.utils.hasImageExtension(t))||n.indexOf(rcmail.env.attachments[t])>=0}function m(t){if(!t)return!1;var n=t.toString().replace(/\./g,"\\."),e=$("#attach"+n).attr("class"),a=e.match(/(png|svg|jpg|jpeg|gif)/g);return!!a}function d(t,n,e){var a=new Image;a.crossOrigin="Anonymous",a.src=t,a.onload=locamail.utils.imageToBase64.bind(a,n,e)}function f(t,n){var e,a,r;e=document.createElement("canvas"),a=e.getContext("2d"),e.width=this.width,e.height=this.height,a.drawImage(this,0,0),r=e.toDataURL(t),n&&"function"==typeof n&&n(r)}function h(t){window.location.href=t}function v(t){var n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return n.test(t)}return{roundNumber:o,kbitsToGigabits:i,detectIE:t,renderAvatarName:n,bindForceCloseDropdown:e,setup:a,randomColor:c,getInitials:s,encodeBars:u,encodeQuotes:g,isImage:l,hasImageExtension:m,imageToBase64:f,handleImage:d,location:h,emailValidator:v}}();